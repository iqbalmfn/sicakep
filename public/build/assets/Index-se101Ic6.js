import{y as H,W as A,r as C,j as e,Y as K}from"./app-By6ozGi5.js";import{B as L,C as O}from"./ContentWrapper-BO_IK-dx.js";import{U as R,C as W,a as q,F as I,D as E,T as a,A as w,b as Y}from"./UsePageController-ieeeUzyV.js";import{L as M}from"./Label-DhJyWA7A.js";import{B as F}from"./react-toastify.esm-DKlvEnLl.js";import{A as _}from"./AppContentLayout-BvCIt9aX.js";import z from"./KategoriCreate-BWE2MFrG.js";import{h as G}from"./GlobalFunction-Dhsi_fy4.js";import"./Button-BN-PnLOc.js";import"./clsx-B-dksMZM.js";import"./FormInput-BG1km1jo.js";import"./RegularSubmitModal-Ccp8rAa0.js";/* empty css                      */import"./transition-BTlIyrDG.js";import"./Modal-DIIvEdPC.js";import"./dialog-DvcbfLJk.js";const J=(n,d,t)=>{H.post(route("master.kategori.store"),n,{onError:r=>{d(r)},onSuccess:()=>{t()},preserveScroll:!1,preserveState:!0})},Q=(n,d,t)=>{H.post(route("master.kategori.update",{kategori:n.id}),{...n,_method:"PUT"},{onError:r=>{d(r)},onSuccess:()=>{t()},preserveScroll:!1,preserveState:!0})},V=(n,d)=>{const{data:t,setData:r,reset:T}=A({nama:"",jenis:"",status:1}),[u,l]=C.useState({}),[x,c]=C.useState(null),h=()=>{l({})},{mode:y,params:m,setParams:D,fetching:j,request:b,showModal:k,handleShowModal:g,handleEditModal:p,handleCloseModal:f,initialData:i,setFetching:S,onHandleFilter:v,onHandleOrder:o}=R(n,h,T,"master.kategori.index");C.useEffect(()=>{j&&b(m)},[m,j]),C.useEffect(()=>{i.id&&r({id:i.id,nama:i.nama,jenis:i.jenis,status:i.status})},[i]);const B=s=>{r(s.target.name,s.target.type==="file"?s.target.files[0]:s.target.value)},N=s=>{s.target.checked?r(s.target.name,1):r(s.target.name,0)},P=s=>{s.preventDefault(),c(F.loading("Sedang menyimpan data...")),J(t,l,h)},U=s=>{s.preventDefault(),c(F.loading("Sedang menyimpan data...")),Q(t,l,h)};return W(d,u,x,c,f),{data:t,processing:x,errors:u,submit:P,update:U,handleChange:B,handleCheckboxChange:N,mode:y,params:m,setParams:D,setFetching:S,onHandleFilter:v,onHandleOrder:o,showModal:k,handleShowModal:g,handleEditModal:p,handleCloseModal:f}},pe=({title:n,breadcrumbs:d,datas:t,filtered:r,flash:T})=>{const{data:u,processing:l,errors:x,submit:c,update:h,handleChange:y,handleCheckboxChange:m,setParams:D,setFetching:j,mode:b,showModal:k,onHandleFilter:g,onHandleOrder:p,handleShowModal:f,handleEditModal:i,handleCloseModal:S}=V(r,T),v=()=>t.data.length>0?t.data.map((o,B)=>e.jsxs(a.TrBody,{children:[e.jsx(a.Td,{children:B+1}),e.jsx(a.Td,{children:o.nama}),e.jsx(a.Td,{children:e.jsx(M,{variant:o.jenis=="pengeluaran"?"danger":"success",children:o.jenis})}),e.jsx(a.Td,{children:e.jsx(M,{variant:o.status==0?"danger":"success",children:o.status==0?"non aktif":"aktif"})}),e.jsxs(a.Td,{className:"text-end pe-3",children:[e.jsx(w,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>i(o)}),e.jsx(w,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>G("master.kategori.destroy",o.id,"Data berhasil dihapus")})]})]},o.id)):e.jsx(Y,{colSpan:5});return e.jsxs(_,{children:[e.jsx(K,{title:n}),e.jsx(L,{title:n,breadcrumbs:d}),e.jsxs(O,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(q,{onClick:f})}),e.jsx(I,{onHandleFilter:g})]}),e.jsxs(E,{children:[e.jsxs(a,{children:[e.jsx(a.Thead,{children:e.jsxs(a.TrHead,{children:[e.jsx(a.Th,{width:"5",ordered:!0,onHandleOrder:p,column:"id",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"no"}),e.jsx(a.Th,{width:"69",children:"Nama Kategori"}),e.jsx(a.Th,{width:"10",ordered:!0,onHandleOrder:p,column:"jenis",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"jenis"}),e.jsx(a.Th,{width:"8",ordered:!0,onHandleOrder:p,column:"status",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"status"}),e.jsx(a.Th,{align:"end",width:"10",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(a.Tbody,{children:v()})]}),e.jsx(E.Footer,{data:t,params:r,setParams:D,setFetching:j,onChange:g})]})]}),e.jsx(z,{title:n,showModal:k,closeModal:S,mode:b,data:u,handleChange:y,handleCheckboxChange:m,errors:x,submit:c,update:h,processing:l})]})};export{pe as default};
