import{j as i}from"./app-khPyyK-E.js";import{F as d,a as m,c as x,b as u,R as I}from"./RegularSubmitModal-B5MkYYuF.js";import{F as o}from"./FormInput-DM7GuzKE.js";import{F as P}from"./FormTextarea-CtGTBWKs.js";import{M as j}from"./Modal-ptuuVaiO.js";import{f as _}from"./GlobalFunction-B7s3KAFw.js";import{c as C}from"./clsx-B-dksMZM.js";import"./Button-Dp62ijLc.js";import"./dialog-BJT0psZ1.js";import"./transition-CyX9F3PE.js";import"./react-toastify.esm-Dv8cz7qT.js";const H=({title:f,submit:k,update:b,showModal:v,closeModal:g,mode:p,data:e,categories:F,users:q,perencanaans:N,pengeluaranData:E,handleChange:l,errors:n,processing:z})=>{const T=["online","cash"];let h=[];h=N.filter(a=>a.kategori_id==e.kategori_id);let s={};s=h.find(a=>a.id==e.perencanaan_id),console.log(s),console.log(e.nominal);let c=0;c=E.filter(a=>a.perencanaan_id==e.perencanaan_id).reduce((a,S)=>a+S.nominal,0),p=="edit"&&(c=c-e.nominal_strict);let t=0;return e.nominal?t=parseInt(c)+parseInt(e.nominal):t=parseInt(c),i.jsxs(j,{maxWidth:"3xl",show:v,onClose:g,closeable:!1,children:[i.jsxs(j.Header,{onClick:g,children:[p==="create"?"Tambah":"Update"," ",f]}),i.jsxs("form",{onSubmit:p==="create"?k:b,children:[i.jsx(j.Body,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-5 py-5",children:[e.perencanaan_id?i.jsxs("div",{className:"col-span-2 flex flex-col border rounded-lg border-info px-3 py-2 text-info bg-blue-50",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Alokasi Anggaran"}),i.jsx("span",{children:":"}),i.jsx("span",{children:_(s==null?void 0:s.nominal)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Anggaran Terpakai"}),i.jsx("span",{children:":"}),i.jsx("span",{className:C(parseInt(s==null?void 0:s.nominal)<t?"text-danger":""),children:_(e.nominal?t:parseInt(c))})]})]}):null,i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[i.jsxs(d,{children:[i.jsx(m,{name:"Kategori",htmlFor:"kategori_id",required:!0}),i.jsxs(x,{size:"sm",id:"kategori_id",name:"kategori_id",onChange:l,value:e.kategori_id,isError:n==null?void 0:n.kategori_id,required:!0,children:[i.jsx("option",{value:"",children:"Pilih Kategori"}),F.map(a=>i.jsx("option",{value:a.value,children:a.label},a.value))]}),i.jsx(u,{message:n==null?void 0:n.kategori_id})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Sumber Anggaran",htmlFor:"perencanaan_id",required:!0}),i.jsxs(x,{size:"sm",id:"perencanaan_id",name:"perencanaan_id",onChange:l,value:e.perencanaan_id,isError:n==null?void 0:n.perencanaan_id,required:!0,disabled:!e.kategori_id,children:[i.jsx("option",{value:"",children:"Pilih Sumber Anggaran"}),h.map(a=>i.jsx("option",{value:a.id,children:a.judul},a.id))]}),i.jsx(u,{message:n==null?void 0:n.perencanaan_id})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Pengguna Dana",htmlFor:"user_id",required:!0}),i.jsxs(x,{size:"sm",id:"user_id",name:"user_id",onChange:l,value:e.user_id,isError:n==null?void 0:n.user_id,required:!0,disabled:!e.perencanaan_id,children:[i.jsx("option",{value:"",children:"Pilih Pengguna Dana"}),q.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))]}),i.jsx(u,{message:n==null?void 0:n.user_id})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Judul",htmlFor:"judul",required:!0}),i.jsx(o,{size:"sm",id:"judul",name:"judul",onChange:l,defaultValue:e.judul,placeholder:"Masukkan Judul",isError:n==null?void 0:n.judul,required:!0,disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.judul})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Nominal",htmlFor:"nominal",required:!0}),i.jsx(o,{type:"number",size:"sm",id:"nominal",name:"nominal",onChange:l,defaultValue:e.nominal,placeholder:"Masukkan Nominal",isError:n==null?void 0:n.nominal,required:!0,disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.nominal})]})]}),i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[i.jsxs(d,{children:[i.jsx(m,{name:"Jenis",htmlFor:"jenis",required:!0}),i.jsx(x,{size:"sm",id:"jenis",name:"jenis",onChange:l,value:e.jenis,isError:n==null?void 0:n.jenis,required:!0,disabled:!e.perencanaan_id,children:T.map(a=>i.jsx("option",{value:a,children:a},a))}),i.jsx(u,{message:n==null?void 0:n.jenis})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Tanggal",htmlFor:"tanggal",required:!0}),i.jsx(o,{type:"date",size:"sm",id:"tanggal",name:"tanggal",onChange:l,defaultValue:e.tanggal,placeholder:"Masukkan Tanggal",isError:n==null?void 0:n.tanggal,required:!0,disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.tanggal})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Deskripsi",htmlFor:"deskripsi"}),i.jsx(P,{size:"sm",id:"deskripsi",name:"deskripsi",onChange:l,defaultValue:e.deskripsi,placeholder:"Tulis Deskripsi...",isError:n==null?void 0:n.deskripsi,rows:"3",disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.deskripsi})]})]})]})}),i.jsx(j.Footer,{children:i.jsx(I,{closeModal:g,label:p==="create"?"Simpan":"Update",disabled:z||!e.user_id||!e.kategori_id||!e.judul||!e.nominal||!e.jenis||!e.tanggal})})]})]})};export{H as default};
