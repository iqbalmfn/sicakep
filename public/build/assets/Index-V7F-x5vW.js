import{y as W,W as q,r as m,j as e,Y as J}from"./app-CjfYFX5_.js";import{B as $,C as G}from"./ContentWrapper-DNQ2og-V.js";import{U as K,C as Q,a as V,F as X,D as A,T as s,A as C,b as Z}from"./UsePageController-Borp1_89.js";import{F as T}from"./FormSelectPrefix-C5h1iG9I.js";import{I as b}from"./Button-CiTflGKJ.js";import{L as z}from"./Label-CxwZmpoP.js";import{N as ee}from"./NameWithAvatar-CPafaRWn.js";import{B as I}from"./react-toastify.esm-D5LBCEBx.js";import{A as ae}from"./AppContentLayout-ip5iDx_b.js";import{g as se,l as ne,a as re,b as te,f as oe,e as ie,i as le,h as de}from"./GlobalFunction-3O6TYQ86.js";import ce from"./UtangCreate-C5SSEguD.js";import ue from"./UtangDetail-xC2xkaFY.js";import"./clsx-B-dksMZM.js";import"./FormInput-Bo8dkbUn.js";import"./RegularSubmitModal-C20D44vr.js";/* empty css                      */import"./transition-3t7GowXj.js";import"./FormTextarea-FjwGxfv8.js";import"./Modal-Dypni5E-.js";import"./dialog-DxDCIgy2.js";const he=(t,h,o)=>{W.post(route("utang-piutang.utang.store"),t,{onError:i=>{h(i)},onSuccess:()=>{o()},preserveScroll:!1,preserveState:!0})},me=(t,h,o)=>{W.post(route("utang-piutang.utang.update",{utang:t.id}),{...t,_method:"PUT"},{onError:i=>{h(i)},onSuccess:()=>{o()},preserveScroll:!1,preserveState:!0})},pe=(t,h)=>{const{data:o,setData:i,reset:n}=q({user_id:"",judul:"",jenis:"transfer",nominal:"",jatuh_tempo:"",deskripsi:""}),[v,p]=m.useState({}),[f,j]=m.useState(null),x=()=>{p({})},{mode:w,params:g,setParams:d,fetching:D,request:S,showModal:y,handleShowModal:B,handleEditModal:c,handleCloseModal:u,initialData:l,setInitialData:M,setFetching:k,onHandleFilter:E,onHandleOrder:N}=K(t,x,n,"utang-piutang.utang.index");m.useEffect(()=>{D&&S(g)},[g,D]),m.useEffect(()=>{l.id&&i({id:l.id,user_id:l.user_id,judul:l.judul,jenis:l.jenis,jatuh_tempo:l.jatuh_tempo,nominal:l.nominal,deskripsi:l.deskripsi})},[l]);const _=r=>{i(r.target.name,r.target.type==="file"?r.target.files[0]:r.target.value)},F=r=>{r.target.checked?i(r.target.name,1):i(r.target.name,0)},U=r=>{r.preventDefault(),j(I.loading("Sedang menyimpan data...")),he(o,p,x)},L=r=>{r.preventDefault(),j(I.loading("Sedang menyimpan data...")),me(o,p,x)},[a,P]=m.useState({}),[R,H]=m.useState(!1),Y=r=>{H(!0),P(r)},O=r=>{H(!1),M({}),n()};return Q(h,v,f,j,u),{data:o,processing:f,errors:v,submit:U,update:L,handleChange:_,handleCheckboxChange:F,mode:w,params:g,setParams:d,setFetching:k,onHandleFilter:E,onHandleOrder:N,showModal:y,handleShowModal:B,handleEditModal:c,handleCloseModal:u,detailData:a,showDetailModal:R,handleShowDetailModal:Y,handleCloseDetailModal:O}},Le=({title:t,breadcrumbs:h,datas:o,users:i,filtered:n,flash:v})=>{const{data:p,processing:f,errors:j,submit:x,update:w,handleChange:g,params:d,setParams:D,setFetching:S,mode:y,showModal:B,onHandleFilter:c,onHandleOrder:u,handleShowModal:l,handleEditModal:M,handleCloseModal:k,detailData:E,showDetailModal:N,handleShowDetailModal:_,handleCloseDetailModal:F}=pe(n,v),U=[{value:0,label:"Belum Lunas"},{value:1,label:"Lunas"}],L=()=>o.data.length>0?o.data.map((a,P)=>e.jsxs(s.TrBody,{children:[e.jsx(s.Td,{children:P+1}),e.jsx(s.Td,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ee,{avatar:a.user.foto?`/images/${a.user.foto}`:a.user.foto,name:a.user.name})})}),e.jsx(s.Td,{children:a.judul}),e.jsx(s.Td,{children:oe(a.nominal)}),e.jsx(s.Td,{children:ie(a.jatuh_tempo)}),e.jsx(s.Td,{children:e.jsx(z,{variant:a.jenis=="cash"?"info":"success",children:a.jenis})}),e.jsx(s.Td,{children:e.jsx(z,{variant:a.status==0?"danger":"success",children:a.status==0?"Belum Lunas":"Lunas"})}),e.jsxs(s.Td,{className:"text-end pe-3",children:[e.jsx(C,{variant:"warning",icon:"search",label:"Detail",onClick:()=>_(a)}),e.jsx(C,{variant:"success",icon:"check-lg",label:"Lunas",onClick:()=>le("utang-piutang.utang.bayar",a.id,"Utang telah dibayar")}),e.jsx(C,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>M(a)}),e.jsx(C,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>de("utang-piutang.utang.destroy",a.id,"Data berhasil dihapus")})]})]},a.id)):e.jsx(Z,{colSpan:8});return e.jsxs(ae,{children:[e.jsx(J,{title:t}),e.jsx($,{title:t,breadcrumbs:h}),e.jsxs(G,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(V,{onClick:l})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("div",{children:e.jsxs(T,{prefix:e.jsx(b,{icon:"person"}),size:"sm",name:"user_id",value:d.user_id,onChange:c,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Peminjam"}),i.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx("div",{children:e.jsxs(T,{prefix:e.jsx(b,{icon:"check-circle"}),size:"sm",name:"status",value:d.status,onChange:c,className:"w-[150px]",children:[e.jsx("option",{value:"",children:"Semua Status"}),U.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(T,{prefix:e.jsx(b,{icon:"calendar-month"}),size:"sm",name:"bulan",value:d.bulan?d.bulan:se(),onChange:c,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Bulan"}),ne().map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(T,{prefix:e.jsx(b,{icon:"calendar-check"}),size:"sm",name:"tahun",value:d.tahun?d.tahun:re(),onChange:c,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Tahun"}),te().map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx(X,{onHandleFilter:c})]})]}),e.jsxs(A,{children:[e.jsxs(s,{children:[e.jsx(s.Thead,{children:e.jsxs(s.TrHead,{children:[e.jsx(s.Th,{width:"4",ordered:!0,onHandleOrder:u,column:"id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"no"}),e.jsx(s.Th,{width:"15",children:"Peminjam"}),e.jsx(s.Th,{width:"15",children:"Judul"}),e.jsx(s.Th,{width:"10",ordered:!0,onHandleOrder:u,column:"nominal",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"nominal"}),e.jsx(s.Th,{width:"10",ordered:!0,onHandleOrder:u,column:"jatuh_tempo",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"jatuh tempo"}),e.jsx(s.Th,{width:"7",ordered:!0,onHandleOrder:u,column:"jenis",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"jenis"}),e.jsx(s.Th,{width:"7",ordered:!0,onHandleOrder:u,column:"status",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"status"}),e.jsx(s.Th,{align:"end",width:"10",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(s.Tbody,{children:L()})]}),e.jsx(A.Footer,{data:o,params:n,setParams:D,setFetching:S,onChange:c})]})]}),e.jsx(ce,{title:t,showModal:B,closeModal:k,mode:y,data:p,users:i,handleChange:g,errors:j,submit:x,update:w,processing:f}),e.jsx(ue,{title:t,showModal:N,closeModal:F,data:E})]})};export{Le as default};
