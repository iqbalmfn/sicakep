import{y as H,W as A,r as C,j as e,Y as K}from"./app-Cdi_OQB5.js";import{B as L}from"./Breadcrumbs-C5z-HWZr.js";import{C as O,a as R,F as W,D as E,T as a,b as q}from"./GlobalHooks-CWa1PRwe.js";import{L as w}from"./Label-iOGnCgGC.js";import{A as M}from"./ActionButton-B1HWIsp_.js";import{B as F}from"./react-toastify.esm-C-1ZJZRP.js";import{U as I}from"./UsePageController-BYvAlKNs.js";import{A as Y}from"./AppContentLayout-_YE0ZPfF.js";import{C as _}from"./ContentWrapper-B6buOs3N.js";import z from"./KategoriCreate-CX4ln_zz.js";import{h as G}from"./GlobalFunction-Crb_YBLM.js";import"./Icon-D_rup-BN.js";import"./clsx-B-dksMZM.js";import"./Button-SIcltFR_.js";import"./FormInput-BGNyigKV.js";import"./RegularSubmitModal-DGBv2ktI.js";/* empty css                      */import"./transition-Bf5V0w49.js";import"./FormToggle-B5X9FAlC.js";import"./Modal-C0vBXtY8.js";import"./dialog-H7w5I7Xk.js";const J=(o,d,t)=>{H.post(route("master.kategori.store"),o,{onError:r=>{d(r)},onSuccess:()=>{t()},preserveScroll:!1,preserveState:!0})},Q=(o,d,t)=>{H.post(route("master.kategori.update",{kategori:o.id}),{...o,_method:"PUT"},{onError:r=>{d(r)},onSuccess:()=>{t()},preserveScroll:!1,preserveState:!0})},V=(o,d)=>{const{data:t,setData:r,reset:T}=A({nama:"",jenis:"",status:1}),[u,l]=C.useState({}),[x,c]=C.useState(null),m=()=>{l({})},{mode:y,params:h,setParams:D,fetching:j,request:b,showModal:k,handleShowModal:g,handleEditModal:p,handleCloseModal:f,initialData:i,setFetching:S,onHandleFilter:v,onHandleOrder:n}=I(o,m,T,"master.kategori.index");C.useEffect(()=>{j&&b(h)},[h,j]),C.useEffect(()=>{i.id&&r({id:i.id,nama:i.nama,jenis:i.jenis,status:i.status})},[i]);const B=s=>{r(s.target.name,s.target.type==="file"?s.target.files[0]:s.target.value)},N=s=>{s.target.checked?r(s.target.name,1):r(s.target.name,0)},P=s=>{s.preventDefault(),c(F.loading("Sedang menyimpan data...")),J(t,l,m)},U=s=>{s.preventDefault(),c(F.loading("Sedang menyimpan data...")),Q(t,l,m)};return O(d,u,x,c,f),{data:t,processing:x,errors:u,submit:P,update:U,handleChange:B,handleCheckboxChange:N,mode:y,params:h,setParams:D,setFetching:S,onHandleFilter:v,onHandleOrder:n,showModal:k,handleShowModal:g,handleEditModal:p,handleCloseModal:f}},fe=({title:o,breadcrumbs:d,datas:t,filtered:r,flash:T})=>{const{data:u,processing:l,errors:x,submit:c,update:m,handleChange:y,handleCheckboxChange:h,setParams:D,setFetching:j,mode:b,showModal:k,onHandleFilter:g,onHandleOrder:p,handleShowModal:f,handleEditModal:i,handleCloseModal:S}=V(r,T),v=()=>t.data.length>0?t.data.map((n,B)=>e.jsxs(a.TrBody,{children:[e.jsx(a.Td,{children:B+1}),e.jsx(a.Td,{children:n.nama}),e.jsx(a.Td,{children:e.jsx(w,{variant:n.jenis=="pengeluaran"?"danger":"success",children:n.jenis})}),e.jsx(a.Td,{children:e.jsx(w,{variant:n.status==0?"danger":"success",children:n.status==0?"non aktif":"aktif"})}),e.jsxs(a.Td,{className:"text-end pe-3",children:[e.jsx(M,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>i(n)}),e.jsx(M,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>G("master.kategori.destroy",n.id,"Data berhasil dihapus")})]})]},n.id)):e.jsx(q,{colSpan:5});return e.jsxs(Y,{children:[e.jsx(K,{title:o}),e.jsx(L,{title:o,breadcrumbs:d}),e.jsxs(_,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(R,{onClick:f})}),e.jsx(W,{onHandleFilter:g})]}),e.jsxs(E,{children:[e.jsxs(a,{children:[e.jsx(a.Thead,{children:e.jsxs(a.TrHead,{children:[e.jsx(a.Th,{width:"5",ordered:!0,onHandleOrder:p,column:"id",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"no"}),e.jsx(a.Th,{width:"69",children:"Nama Kategori"}),e.jsx(a.Th,{width:"10",ordered:!0,onHandleOrder:p,column:"jenis",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"jenis"}),e.jsx(a.Th,{width:"8",ordered:!0,onHandleOrder:p,column:"status",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"status"}),e.jsx(a.Th,{align:"end",width:"10",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(a.Tbody,{children:v()})]}),e.jsx(E.Footer,{data:t,params:r,setParams:D,setFetching:j,onChange:g})]})]}),e.jsx(z,{title:o,showModal:k,closeModal:S,mode:b,data:u,handleChange:y,handleCheckboxChange:h,errors:x,submit:c,update:m,processing:l})]})};export{fe as default};
