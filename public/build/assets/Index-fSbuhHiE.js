import{W as Z,r as i,j as a,Y as aa}from"./app-Dky1OL0q.js";import{B as ea}from"./Breadcrumbs-BBA3x9fV.js";import{C as sa,a as na,D as $,T as n,A as O,b as ta,F as ra}from"./GlobalHooks-RbAbv1gA.js";import{F as G}from"./FormSelectPrefix-BtsEEQDD.js";import{I as J}from"./Icon-DqCGg3DT.js";import{L as K}from"./Label-CoOxO4J1.js";import{N as oa}from"./NameWithAvatar-BbVMXKZf.js";import{B as q}from"./react-toastify.esm-D4KLAdp0.js";import{U as ia}from"./UsePageController-JGUW_bta.js";import{A as la}from"./AppContentLayout-BXu8HdDp.js";import{C as da}from"./ContentWrapper-Ycte89Bk.js";import{f as ca,d as Q}from"./GlobalFunction-BYU1XxCA.js";import{p as ma,a as ha,u as ua}from"./UtangPiutangServices-BnmXupGh.js";import pa from"./PiutangCreate-CCb2zAOp.js";import xa from"./PiutangDetail-esjI4z4P.js";import ja from"./PiutangTransaksi-S4cPx124.js";import"./Button-H6c4ZnJ5.js";import"./clsx-B-dksMZM.js";import"./FormInput-BMU-lflI.js";import"./RegularSubmitModal-DMuzVBCr.js";/* empty css                      */import"./transition-DfSEsz85.js";import"./FormTextarea-C51USjr7.js";import"./Modal-BEsgWuvn.js";import"./dialog-C8x8T90B.js";const ga=(h,v)=>{const{data:o,setData:l,reset:u}=Z({user_id:"",nama:"",jenis:"transfer",nominal:"",tanggal:"",jatuh_tempo:"",deskripsi:""}),[x,t]=i.useState({}),[j,d]=i.useState(null),c=()=>{t({})},{mode:g,params:p,setParams:k,fetching:f,request:T,showModal:y,handleShowModal:S,handleEditModal:D,handleCloseModal:w,initialData:r,setInitialData:m,setFetching:b,onHandleFilter:B,onHandleOrder:_}=ia(h,c,u,"utang-piutang.piutang.index");i.useEffect(()=>{f&&T(p)},[p,f]),i.useEffect(()=>{r.id&&l({id:r.id,user_id:r.user_id,nama:r.nama,tanggal:r.tanggal,jatuh_tempo:r.jatuh_tempo,nominal:r.nominal,deskripsi:r.deskripsi})},[r]);const P=e=>{l(e.target.name,e.target.type==="file"?e.target.files[0]:e.target.value)},E=e=>{e.target.checked?l(e.target.name,1):l(e.target.name,0)},N=e=>{e.preventDefault(),d(q.loading("Sedang menyimpan data...")),ma(o,t,c)},F=e=>{e.preventDefault(),d(q.loading("Sedang menyimpan data...")),ha(o,t,c)},[L,A]=i.useState({}),[H,C]=i.useState(!1),I=e=>{C(!0),A(e)},R=e=>{C(!1),m({}),u()},[M,U]=i.useState({}),[W,s]=i.useState(!1),z=e=>{s(!0),U(e),l({user_id:e.user_id,piutang_master_id:e.id,judul:"",tipe:"piutang",jenis:"transfer",nominal:"",jatuh_tempo:"",deskripsi:""})},Y=e=>{s(!1),m({}),u()},V=e=>{l(e.target.name,e.target.type==="file"?e.target.files[0]:e.target.value)},X=e=>{e.preventDefault(),d(q.loading("Sedang menyimpan data...")),ua(o,t,c)};return sa(v,x,j,d,M?Y:w),{data:o,processing:j,errors:x,submit:N,update:F,handleChange:P,handleCheckboxChange:E,mode:g,params:p,setParams:k,setFetching:b,onHandleFilter:B,onHandleOrder:_,showModal:y,handleShowModal:S,handleEditModal:D,handleCloseModal:w,detailData:L,showDetailModal:H,handleShowDetailModal:I,handleCloseDetailModal:R,transaksi:M,showTransaksiModal:W,handleShowTransaksiModal:z,handleCloseTransaksiModal:Y,handleChangeTransaksi:V,submitPiutang:X}},Oa=({title:h,breadcrumbs:v,datas:o,widget:l,peminjams:u,users:x,filtered:t,flash:j})=>{const{data:d,processing:c,errors:g,submit:p,update:k,handleChange:f,params:T,setParams:y,setFetching:S,mode:D,showModal:w,onHandleFilter:r,onHandleOrder:m,handleShowModal:b,handleEditModal:B,handleCloseModal:_,detailData:P,showDetailModal:E,handleShowDetailModal:N,handleCloseDetailModal:F,transaksi:L,showTransaksiModal:A,handleShowTransaksiModal:H,handleCloseTransaksiModal:C,handleChangeTransaksi:I,submitPiutang:R}=ga(t,j),M=[{value:0,label:"Belum Lunas"},{value:1,label:"Lunas"}],U=()=>o.data.length>0?o.data.map((s,z)=>a.jsxs(n.TrBody,{children:[a.jsx(n.Td,{children:z+1}),a.jsx(n.Td,{children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(oa,{avatar:s.user.foto?`/images/${s.user.foto}`:s.user.foto,name:s.user.name})})}),a.jsx(n.Td,{children:s.nama}),a.jsx(n.Td,{children:ca(s.nominal)}),a.jsx(n.Td,{children:Q(s.tanggal)}),a.jsx(n.Td,{children:s.jatuh_tempo?Q(s.jatuh_tempo):a.jsx(K,{variant:"info",children:"Tidak Ditentukan"})}),a.jsx(n.Td,{children:a.jsx(K,{variant:"danger",children:"Belum Lunas"})}),a.jsxs(n.Td,{className:"text-end pe-3",children:[a.jsx(O,{variant:"warning",icon:"search",label:"Detail",onClick:()=>N(s)}),a.jsx(O,{variant:"success",icon:"currency-dollar",label:"Bayar",onClick:()=>H(s)}),a.jsx(O,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>B(s)})]})]},s.id)):a.jsx(ta,{colSpan:8}),W=()=>a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("div",{children:a.jsxs(G,{prefix:a.jsx(J,{icon:"person"}),size:"sm",name:"nama",value:T.nama,onChange:r,className:"w-[205px]",children:[a.jsx("option",{value:"",children:"Semua Peminjam"}),u.map(s=>a.jsx("option",{value:s.nama,children:s.nama},s.id))]})}),a.jsx("div",{children:a.jsxs(G,{prefix:a.jsx(J,{icon:"check-circle"}),size:"sm",name:"status",value:T.status,onChange:r,className:"w-[150px]",children:[a.jsx("option",{value:"",children:"Semua Status"}),M.map(s=>a.jsx("option",{value:s.value,children:s.label},s.value))]})}),a.jsx(ra,{onHandleFilter:r})]});return a.jsxs(la,{children:[a.jsx(aa,{title:h}),a.jsx(ea,{title:h,breadcrumbs:v}),a.jsxs(da,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(na,{onClick:b})}),W()]}),a.jsxs($,{children:[a.jsxs(n,{children:[a.jsx(n.Thead,{children:a.jsxs(n.TrHead,{children:[a.jsx(n.Th,{width:"4",ordered:!0,onHandleOrder:m,column:"id",orderBy:t.orderBy,orderDirection:t.orderDirection,children:"no"}),a.jsx(n.Th,{width:"15",children:"Donatur"}),a.jsx(n.Th,{width:"15",children:"Peminjam"}),a.jsx(n.Th,{width:"10",ordered:!0,onHandleOrder:m,column:"nominal",orderBy:t.orderBy,orderDirection:t.orderDirection,children:"nominal"}),a.jsx(n.Th,{width:"10",ordered:!0,onHandleOrder:m,column:"tanggal",orderBy:t.orderBy,orderDirection:t.orderDirection,children:"tanggal meminjam"}),a.jsx(n.Th,{width:"10",ordered:!0,onHandleOrder:m,column:"jatuh_tempo",orderBy:t.orderBy,orderDirection:t.orderDirection,children:"janji bayar"}),a.jsx(n.Th,{width:"7",children:"status"}),a.jsx(n.Th,{align:"end",width:"10",children:a.jsx("span",{className:"me-3",children:"opsi"})})]})}),a.jsx(n.Tbody,{children:U()})]}),a.jsx($.Footer,{data:o,params:t,setParams:y,setFetching:S,onChange:r})]})]}),a.jsx(pa,{title:h,showModal:w,closeModal:_,mode:D,data:d,users:x,handleChange:f,errors:g,submit:p,update:k,processing:c}),a.jsx(ja,{showModal:A,closeModal:C,mode:D,data:d,dataTransaksi:L,handleChange:I,errors:g,submit:R,processing:c}),a.jsx(xa,{title:h,showModal:E,closeModal:F,data:P})]})};export{Oa as default};
