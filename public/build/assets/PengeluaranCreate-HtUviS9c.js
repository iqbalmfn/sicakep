import{j as i}from"./app-BCYkAQV1.js";import{F as s,a as d,c as x,b as m,R as S}from"./RegularSubmitModal-C7UH-1ux.js";import{F as o}from"./FormInput-D_kkfuhz.js";import{F as P}from"./FormTextarea-abVPmTcp.js";import{M as j}from"./Modal-BekrTkap.js";import{f as _}from"./GlobalFunction-g-brQ5Tw.js";import{c as C}from"./clsx-B-dksMZM.js";import"./Button-R4OfXs8N.js";import"./dialog-C3Lp3WdX.js";import"./transition-CVmgSARs.js";import"./react-toastify.esm-Di3itrqL.js";const H=({title:f,submit:k,update:b,showModal:v,closeModal:g,mode:c,data:e,categories:F,users:q,perencanaans:N,pengeluaranData:E,handleChange:l,errors:n,processing:z})=>{const I=["online","cash"];let h=[];h=N.filter(a=>a.kategori_id==e.kategori_id);let u={};u=h.find(a=>a.id==e.perencanaan_id);let p=0;p=E.filter(a=>a.perencanaan_id==e.perencanaan_id).reduce((a,T)=>parseInt(a)+parseInt(T.nominal),0),c=="edit"&&(p=p-e.nominal_strict);let t=0;return e.nominal?t=parseInt(p)+parseInt(e.nominal):t=parseInt(p),i.jsxs(j,{maxWidth:"3xl",show:v,onClose:g,closeable:!1,children:[i.jsxs(j.Header,{onClick:g,children:[c==="create"?"Tambah":"Update"," ",f]}),i.jsxs("form",{onSubmit:c==="create"?k:b,children:[i.jsx(j.Body,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-5 py-5",children:[e.perencanaan_id?i.jsxs("div",{className:"col-span-2 flex flex-col border rounded-lg border-info px-3 py-2 text-info bg-blue-50",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Alokasi Anggaran"}),i.jsx("span",{children:":"}),i.jsx("span",{children:_(u==null?void 0:u.nominal)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Anggaran Terpakai"}),i.jsx("span",{children:":"}),i.jsx("span",{className:C(parseInt(u==null?void 0:u.nominal)<t?"text-danger":""),children:_(e.nominal?t:parseInt(p))})]})]}):null,i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[i.jsxs(s,{children:[i.jsx(d,{name:"Kategori",htmlFor:"kategori_id",required:!0}),i.jsxs(x,{size:"sm",id:"kategori_id",name:"kategori_id",onChange:l,value:e.kategori_id,isError:n==null?void 0:n.kategori_id,required:!0,children:[i.jsx("option",{value:"",children:"Pilih Kategori"}),F.map(a=>i.jsx("option",{value:a.value,children:a.label},a.value))]}),i.jsx(m,{message:n==null?void 0:n.kategori_id})]}),i.jsxs(s,{children:[i.jsx(d,{name:"Sumber Anggaran",htmlFor:"perencanaan_id",required:!0}),i.jsxs(x,{size:"sm",id:"perencanaan_id",name:"perencanaan_id",onChange:l,value:e.perencanaan_id,isError:n==null?void 0:n.perencanaan_id,required:!0,disabled:!e.kategori_id,children:[i.jsx("option",{value:"",children:"Pilih Sumber Anggaran"}),h.map(a=>i.jsx("option",{value:a.id,children:a.judul},a.id))]}),i.jsx(m,{message:n==null?void 0:n.perencanaan_id})]}),i.jsxs(s,{children:[i.jsx(d,{name:"Pengguna Dana",htmlFor:"user_id",required:!0}),i.jsxs(x,{size:"sm",id:"user_id",name:"user_id",onChange:l,value:e.user_id,isError:n==null?void 0:n.user_id,required:!0,disabled:!e.perencanaan_id,children:[i.jsx("option",{value:"",children:"Pilih Pengguna Dana"}),q.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))]}),i.jsx(m,{message:n==null?void 0:n.user_id})]}),i.jsxs(s,{children:[i.jsx(d,{name:"Judul",htmlFor:"judul",required:!0}),i.jsx(o,{size:"sm",id:"judul",name:"judul",onChange:l,defaultValue:e.judul,placeholder:"Masukkan Judul",isError:n==null?void 0:n.judul,required:!0,disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.judul})]}),i.jsxs(s,{children:[i.jsx(d,{name:"Nominal",htmlFor:"nominal",required:!0}),i.jsx(o,{type:"number",size:"sm",id:"nominal",name:"nominal",onChange:l,defaultValue:e.nominal,placeholder:"Masukkan Nominal",isError:n==null?void 0:n.nominal,required:!0,disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.nominal})]})]}),i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[i.jsxs(s,{children:[i.jsx(d,{name:"Jenis",htmlFor:"jenis",required:!0}),i.jsx(x,{size:"sm",id:"jenis",name:"jenis",onChange:l,value:e.jenis,isError:n==null?void 0:n.jenis,required:!0,disabled:!e.perencanaan_id,children:I.map(a=>i.jsx("option",{value:a,children:a},a))}),i.jsx(m,{message:n==null?void 0:n.jenis})]}),i.jsxs(s,{children:[i.jsx(d,{name:"Tanggal",htmlFor:"tanggal",required:!0}),i.jsx(o,{type:"date",size:"sm",id:"tanggal",name:"tanggal",onChange:l,defaultValue:e.tanggal,placeholder:"Masukkan Tanggal",isError:n==null?void 0:n.tanggal,required:!0,disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.tanggal})]}),i.jsxs(s,{children:[i.jsx(d,{name:"Deskripsi",htmlFor:"deskripsi"}),i.jsx(P,{size:"sm",id:"deskripsi",name:"deskripsi",onChange:l,defaultValue:e.deskripsi,placeholder:"Tulis Deskripsi...",isError:n==null?void 0:n.deskripsi,rows:"3",disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.deskripsi})]})]})]})}),i.jsx(j.Footer,{children:i.jsx(S,{closeModal:g,label:c==="create"?"Simpan":"Update",disabled:z||!e.user_id||!e.kategori_id||!e.judul||!e.nominal||!e.jenis||!e.tanggal})})]})]})};export{H as default};
