import{y as W,W as K,r as h,j as e,Y as O,a as q}from"./app-BP0qTR0w.js";import{B as J}from"./Breadcrumbs-BG-FIMAj.js";import{C as $,a as G,F as Q,D as I,T as V}from"./GlobalHooks-DkVbyiLs.js";import{F as D}from"./FormSelectPrefix-DG4tE3EU.js";import{I as b}from"./Icon-JlNqDR6m.js";import{L as X}from"./Label-CoMV2WI_.js";import{N as Z}from"./NameWithAvatar-D4yMWYC4.js";import{A as U}from"./ActionButton-DXaGyqpr.js";import{U as ee,T as r}from"./UsePageController-B-2z9yWU.js";import{B as R}from"./react-toastify.esm-gi-q3jTe.js";import{A as ae}from"./AppContentLayout-abZjnRtQ.js";import{C as re}from"./ContentWrapper-DQLSgmI8.js";import{g as se,l as ne,a as ie,b as oe,f as te,c as le,h as de}from"./GlobalFunction-Dcsmydqw.js";import ce from"./PemasukanCreate-0eqeytbL.js";import me from"./PemasukanDetail-B4UeTBWh.js";import"./Button-CoAr_SPo.js";import"./clsx-B-dksMZM.js";import"./FormInput-Did73pXd.js";import"./RegularSubmitModal-D-7UErTW.js";/* empty css                      */import"./transition-Cb_EMTYG.js";import"./FormTextarea-C1C6Hj5z.js";import"./Modal-Dh8RjWR_.js";import"./dialog-DPyy5kJK.js";const he=(o,c,t)=>{W.post(route("transaksi.pemasukan.store"),o,{onError:l=>{c(l)},onSuccess:()=>{t()},preserveScroll:!1,preserveState:!0})},ue=(o,c,t)=>{W.post(route("transaksi.pemasukan.update",{pemasukan:o.id}),{...o,_method:"PUT"},{onError:l=>{c(l)},onSuccess:()=>{t()},preserveScroll:!1,preserveState:!0})},pe=(o,c)=>{const{data:t,setData:l,reset:g}=K({kategori_id:"",user_id:"",rekening_id:"",judul:"",nominal:"",tanggal:"",jenis:"online",deskripsi:""}),[u,n]=h.useState({}),[f,p]=h.useState(null),x=()=>{n({})},{mode:w,params:j,setParams:C,fetching:v,request:d,showModal:T,handleShowModal:S,handleEditModal:y,handleCloseModal:k,initialData:s,setInitialData:m,setFetching:M,onHandleFilter:B,onHandleOrder:N}=ee(o,x,g,"transaksi.pemasukan.index");h.useEffect(()=>{v&&d(j)},[j,v]),h.useEffect(()=>{s.id&&l({id:s.id,user_id:s.user_id,kategori_id:s.kategori_id,rekening_id:s.rekening_id,judul:s.judul,nominal:s.nominal,tanggal:s.tanggal,jenis:s.jenis,deskripsi:s.deskripsi})},[s]);const _=i=>{l(i.target.name,i.target.type==="file"?i.target.files[0]:i.target.value)},E=i=>{i.target.checked?l(i.target.name,1):l(i.target.name,0)},F=i=>{i.preventDefault(),p(R.loading("Sedang menyimpan data...")),he(t,n,x)},P=i=>{i.preventDefault(),p(R.loading("Sedang menyimpan data...")),ue(t,n,x)},[H,a]=h.useState({}),[A,z]=h.useState(!1),L=i=>{z(!0),a(i)},Y=i=>{z(!1),m({}),g()};return $(c,u,f,p,k),{data:t,processing:f,errors:u,submit:F,update:P,handleChange:_,handleCheckboxChange:E,mode:w,params:j,setParams:C,setFetching:M,onHandleFilter:B,onHandleOrder:N,showModal:T,handleShowModal:S,handleEditModal:y,handleCloseModal:k,detailData:H,showDetailModal:A,handleShowDetailModal:L,handleCloseDetailModal:Y}},Ie=({title:o,breadcrumbs:c,datas:t,categories:l,users:g,rekenings:u,filtered:n,flash:f})=>{const{data:p,processing:x,errors:w,submit:j,update:C,handleChange:v,params:d,setParams:T,setFetching:S,mode:y,showModal:k,onHandleFilter:s,onHandleOrder:m,handleShowModal:M,handleEditModal:B,handleCloseModal:N,detailData:_,showDetailModal:E,handleShowDetailModal:F,handleCloseDetailModal:P}=pe(n,f),H=()=>t.data.length>0?t.data.map((a,A)=>e.jsxs(r.TrBody,{children:[e.jsx(r.Td,{children:A+1}),e.jsx(r.Td,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Z,{avatar:a.user.foto?`/images/${a.user.foto}`:a.user.foto,name:a.user.name})})}),e.jsx(r.Td,{children:a.kategori.nama}),e.jsx(r.Td,{children:a.judul}),e.jsx(r.Td,{children:te(a.nominal)}),e.jsx(r.Td,{children:le(a.tanggal)}),e.jsx(r.Td,{children:e.jsx(X,{variant:a.jenis=="cash"?"info":"success",children:a.jenis})}),e.jsxs(r.Td,{className:"text-end pe-3",children:[e.jsx(U,{variant:"warning",icon:"search",label:"Detail",onClick:()=>F(a)}),e.jsx(U,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>B(a)}),e.jsx(U,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>de("transaksi.pemasukan.destroy",a.id,"Data berhasil dihapus")})]})]},a.id)):e.jsx(V,{colSpan:9});return e.jsxs(ae,{children:[e.jsx(O,{title:o}),e.jsx(J,{title:o,breadcrumbs:c}),e.jsxs(re,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{onClick:M}),e.jsx(q,{href:route("perencanaan.view",d),target:"_blank",rel:"noopener noreferrer",className:"rounded-lg bg-transparent text-primary border border-primary group hover:bg-primary hover:text-white w-[37px] h-[37px] flex justify-center items-center",children:e.jsx("i",{className:"bi bi-file-text"})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs(D,{prefix:e.jsx(b,{icon:"wallet2"}),size:"sm",name:"rekening_id",value:d.rekening_id,onChange:s,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Rekening"}),u.map(a=>e.jsx("option",{value:a.id,children:a.nama_rekening},a.id))]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(D,{prefix:e.jsx(b,{icon:"tag"}),size:"sm",name:"kategori_id",value:d.kategori_id,onChange:s,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),l.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(D,{prefix:e.jsx(b,{icon:"calendar-month"}),size:"sm",name:"bulan",value:d.bulan?d.bulan:se(),onChange:s,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Bulan"}),ne().map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(D,{prefix:e.jsx(b,{icon:"calendar-check"}),size:"sm",name:"tahun",value:d.tahun?d.tahun:ie(),onChange:s,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Tahun"}),oe().map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx(Q,{onHandleFilter:s})]})]}),e.jsxs(I,{children:[e.jsxs(r,{children:[e.jsx(r.Thead,{children:e.jsxs(r.TrHead,{children:[e.jsx(r.Th,{width:"4",ordered:!0,onHandleOrder:m,column:"id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"no"}),e.jsx(r.Th,{width:"15",children:"Donatur"}),e.jsx(r.Th,{width:"15",ordered:!0,onHandleOrder:m,column:"kategori_id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"Kategori"}),e.jsx(r.Th,{width:"15",children:"Judul"}),e.jsx(r.Th,{width:"10",ordered:!0,onHandleOrder:m,column:"nominal",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"nominal"}),e.jsx(r.Th,{width:"10",ordered:!0,onHandleOrder:m,column:"tanggal",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"tanggal"}),e.jsx(r.Th,{width:"7",ordered:!0,onHandleOrder:m,column:"jenis",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"jenis"}),e.jsx(r.Th,{align:"end",width:"10",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(r.Tbody,{children:H()})]}),e.jsx(I.Footer,{data:t,params:n,setParams:T,setFetching:S,onChange:s})]})]}),e.jsx(ce,{title:o,showModal:k,closeModal:N,mode:y,data:p,categories:l,users:g,rekenings:u,handleChange:v,errors:w,submit:j,update:C,processing:x}),e.jsx(me,{title:o,showModal:E,closeModal:P,data:_})]})};export{Ie as default};
