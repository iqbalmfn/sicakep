import{j as i}from"./app-Esk4smMP.js";import{F as d,a as m,c,b as u,R as I}from"./RegularSubmitModal-BQQEQ2D0.js";import{F as h}from"./FormInput-CwX9YeZ4.js";import{F as P}from"./FormTextarea-CRd202Vt.js";import{M as j}from"./Modal-CGBLfhy4.js";import{f as o}from"./GlobalFunction-MPVoFHby.js";import{c as S}from"./clsx-B-dksMZM.js";import"./Button-TwuELYel.js";import"./dialog-BushzQjs.js";import"./transition-CT-KJqE9.js";import"./react-toastify.esm-BxdoXAWA.js";const G=({title:_,submit:f,update:k,showModal:b,closeModal:t,mode:x,data:e,categories:v,users:F,perencanaans:q,pengeluaranData:E,handleChange:l,errors:n,processing:N})=>{const z=["online","cash"];let g=[];g=q.filter(a=>a.kategori_id==e.kategori_id);let s={};s=g.find(a=>a.id==e.perencanaan_id),console.log(s);let p=0;return p=E.filter(a=>a.perencanaan_id==e.perencanaan_id).reduce((a,T)=>a+T.nominal,0),i.jsxs(j,{maxWidth:"md",show:b,onClose:t,closeable:!1,children:[i.jsxs(j.Header,{onClick:t,children:[x==="create"?"Tambah":"Update"," ",_]}),i.jsxs("form",{onSubmit:x==="create"?f:k,children:[i.jsx(j.Body,{children:i.jsx("div",{className:"grid grid-cols-1 gap-5 py-5",children:i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[e.perencanaan_id?i.jsxs("div",{className:"flex flex-col border rounded-lg border-info px-3 py-2 text-info bg-blue-50",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Alokasi Anggaran"}),i.jsx("span",{children:":"}),i.jsx("span",{children:o(s==null?void 0:s.nominal)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Anggaran Terpakai"}),i.jsx("span",{children:":"}),i.jsx("span",{className:S(parseInt(s==null?void 0:s.nominal)<parseInt(p)+parseInt(e.nominal)?"text-danger":""),children:o(e.nominal?parseInt(p)+parseInt(e.nominal):p)})]})]}):null,i.jsxs(d,{children:[i.jsx(m,{name:"Kategori",htmlFor:"kategori_id",required:!0}),i.jsxs(c,{size:"sm",id:"kategori_id",name:"kategori_id",onChange:l,value:e.kategori_id,isError:n==null?void 0:n.kategori_id,required:!0,children:[i.jsx("option",{value:"",children:"Pilih Kategori"}),v.map(a=>i.jsx("option",{value:a.value,children:a.label},a.value))]}),i.jsx(u,{message:n==null?void 0:n.kategori_id})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Sumber Anggaran",htmlFor:"perencanaan_id",required:!0}),i.jsxs(c,{size:"sm",id:"perencanaan_id",name:"perencanaan_id",onChange:l,value:e.perencanaan_id,isError:n==null?void 0:n.perencanaan_id,required:!0,disabled:!e.kategori_id,children:[i.jsx("option",{value:"",children:"Pilih Sumber Anggaran"}),g.map(a=>i.jsx("option",{value:a.id,children:a.judul},a.id))]}),i.jsx(u,{message:n==null?void 0:n.perencanaan_id})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Pengguna Dana",htmlFor:"user_id",required:!0}),i.jsxs(c,{size:"sm",id:"user_id",name:"user_id",onChange:l,value:e.user_id,isError:n==null?void 0:n.user_id,required:!0,disabled:!e.perencanaan_id,children:[i.jsx("option",{value:"",children:"Pilih Pengguna Dana"}),F.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))]}),i.jsx(u,{message:n==null?void 0:n.user_id})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Judul",htmlFor:"judul",required:!0}),i.jsx(h,{size:"sm",id:"judul",name:"judul",onChange:l,defaultValue:e.judul,placeholder:"Masukkan Judul",isError:n==null?void 0:n.judul,required:!0,disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.judul})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Nominal",htmlFor:"nominal",required:!0}),i.jsx(h,{type:"number",size:"sm",id:"nominal",name:"nominal",onChange:l,defaultValue:e.nominal,placeholder:"Masukkan Nominal",isError:n==null?void 0:n.nominal,required:!0,disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.nominal})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Jenis",htmlFor:"jenis",required:!0}),i.jsx(c,{size:"sm",id:"jenis",name:"jenis",onChange:l,value:e.jenis,isError:n==null?void 0:n.jenis,required:!0,disabled:!e.perencanaan_id,children:z.map(a=>i.jsx("option",{value:a,children:a},a))}),i.jsx(u,{message:n==null?void 0:n.jenis})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Tanggal",htmlFor:"tanggal",required:!0}),i.jsx(h,{type:"date",size:"sm",id:"tanggal",name:"tanggal",onChange:l,defaultValue:e.tanggal,placeholder:"Masukkan Tanggal",isError:n==null?void 0:n.tanggal,required:!0,disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.tanggal})]}),i.jsxs(d,{children:[i.jsx(m,{name:"Deskripsi",htmlFor:"deskripsi"}),i.jsx(P,{size:"sm",id:"deskripsi",name:"deskripsi",onChange:l,defaultValue:e.deskripsi,placeholder:"Tulis Deskripsi...",isError:n==null?void 0:n.deskripsi,rows:"3",disabled:!e.perencanaan_id}),i.jsx(u,{message:n==null?void 0:n.deskripsi})]})]})})}),i.jsx(j.Footer,{children:i.jsx(I,{closeModal:t,label:x==="create"?"Simpan":"Update",disabled:N||!e.user_id||!e.kategori_id||!e.judul||!e.nominal||!e.jenis||!e.tanggal})})]})]})};export{G as default};
