import{y as O,W as q,r as u,j as e,Y as J,a as $}from"./app-UVFO0ZgA.js";import{B as G}from"./Breadcrumbs-Cpuw1mof.js";import{C as Q,a as V,F as X,D as L,T as Z}from"./GlobalHooks-CRJfo_kG.js";import{F as T}from"./FormSelectPrefix-BDIlTEfx.js";import{I as C}from"./Icon-CIUb5iLn.js";import{L as ee}from"./Label-5h4Oivxf.js";import{N as ae}from"./NameWithAvatar--bwZYf6g.js";import{A as K}from"./ActionButton-C8zkDC9Q.js";import{U as re,T as r}from"./UsePageController-D4e6JcyB.js";import{B as Y}from"./react-toastify.esm-BG4VbzAR.js";import{A as ne}from"./AppContentLayout-uprGBnmC.js";import{C as f}from"./ContentWrapper-BG-1JI41.js";import{f as b,g as se,l as le,a as oe,b as ie,c as te,h as de}from"./GlobalFunction-ClZYWXXL.js";import ce from"./PengeluaranCreate-kPIGzpyC.js";import me from"./PengeluaranDetail-DcXF_HtZ.js";import"./Button-F8vdd4UU.js";import"./clsx-B-dksMZM.js";import"./FormInput-CBwyJR2b.js";import"./RegularSubmitModal-C1sT-BSU.js";/* empty css                      */import"./transition-Dt1y6Vjt.js";import"./FormTextarea-CEIdF7dn.js";import"./FormToggle-DYRRXuot.js";import"./Modal-Cr2HN_1p.js";import"./dialog-B54NAuet.js";const xe=(o,h,i)=>{O.post(route("transaksi.pengeluaran.store"),o,{onError:t=>{h(t)},onSuccess:()=>{i()},preserveScroll:!1,preserveState:!0})},he=(o,h,i)=>{O.post(route("transaksi.pengeluaran.update",{pengeluaran:o.id}),{...o,_method:"PUT"},{onError:t=>{h(t)},onSuccess:()=>{i()},preserveScroll:!1,preserveState:!0})},pe=(o,h)=>{const{data:i,setData:t,reset:g}=q({user_id:"",kategori_id:"",perencanaan_id:"",rekening_id:"",judul:"",nominal:"",tanggal:"",jenis:"online",deskripsi:"",is_sesuai:1}),[v,p]=u.useState({}),[D,c]=u.useState(null),n=()=>{p({})},{mode:w,params:j,setParams:_,fetching:k,request:y,showModal:S,handleShowModal:M,handleEditModal:B,handleCloseModal:d,initialData:s,setInitialData:E,setFetching:P,onHandleFilter:F,onHandleOrder:m}=re(o,n,g,"transaksi.pengeluaran.index");u.useEffect(()=>{k&&y(j)},[j,k]),u.useEffect(()=>{s.id&&t({id:s.id,user_id:s.user_id,kategori_id:s.kategori_id,perencanaan_id:s.perencanaan_id,rekening_id:s.rekening_id,judul:s.judul,nominal:s.nominal,nominal_strict:s.nominal,tanggal:s.tanggal,jenis:s.jenis,deskripsi:s.deskripsi,is_sesuai:s.is_sesuai,rekening:s.rekening})},[s]);const x=l=>{t(l.target.name,l.target.type==="file"?l.target.files[0]:l.target.value)},A=l=>{l.target.checked?t(l.target.name,1):t(l.target.name,0)},H=l=>{l.preventDefault(),c(Y.loading("Sedang menyimpan data...")),xe(i,p,n)},U=l=>{l.preventDefault(),c(Y.loading("Sedang menyimpan data...")),he(i,p,n)},[z,I]=u.useState({}),[R,N]=u.useState(!1),W=l=>{N(!0),I(l)},a=l=>{N(!1),E({}),g()};return Q(h,v,D,c,d),{data:i,processing:D,errors:v,submit:H,update:U,handleChange:x,handleCheckboxChange:A,mode:w,params:j,setParams:_,setFetching:P,onHandleFilter:F,onHandleOrder:m,showModal:S,handleShowModal:M,handleEditModal:B,handleCloseModal:d,detailData:z,showDetailModal:R,handleShowDetailModal:W,handleCloseDetailModal:a}},Re=({title:o,breadcrumbs:h,datas:i,dataAll:t,categories:g,users:v,rekenings:p,perencanaans:D,widget:c,filtered:n,flash:w})=>{const{data:j,processing:_,errors:k,submit:y,update:S,handleChange:M,handleCheckboxChange:B,params:d,setParams:s,setFetching:E,mode:P,showModal:F,onHandleFilter:m,onHandleOrder:x,handleShowModal:A,handleEditModal:H,handleCloseModal:U,detailData:z,showDetailModal:I,handleShowDetailModal:R,handleCloseDetailModal:N}=pe(n,w),W=()=>i.data.length>0?i.data.map((a,l)=>e.jsxs(r.TrBody,{children:[e.jsx(r.Td,{children:l+1}),e.jsx(r.Td,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ae,{avatar:a.user.foto?`/images/${a.user.foto}`:a.user.foto,name:a.user.name})})}),e.jsx(r.Td,{children:a.kategori.nama}),e.jsx(r.Td,{children:a.perencanaan.judul}),e.jsx(r.Td,{children:a.judul}),e.jsx(r.Td,{children:b(a.nominal)}),e.jsx(r.Td,{children:te(a.tanggal)}),e.jsx(r.Td,{children:e.jsx(ee,{variant:a.jenis=="cash"?"info":"success",children:a.jenis})}),e.jsxs(r.Td,{className:"text-end pe-3",children:[e.jsx(K,{variant:"warning",icon:"search",label:"Detail",onClick:()=>R(a)}),e.jsx(K,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>H(a)}),e.jsx(K,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>de("transaksi.pemasukan.destroy",a.id,"Data berhasil dihapus")})]})]},a.id)):e.jsx(Z,{colSpan:9});return e.jsxs(ne,{children:[e.jsx(J,{title:o}),e.jsx(G,{title:o,breadcrumbs:h}),e.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-5",children:[e.jsx("div",{className:"col-span-2 lg:col-span-1",children:e.jsxs(f,{className:"flex flex-col gap-2 pb-6 text-info border border-2 border-info",children:[e.jsx("span",{className:"text-md lg:text-xl font-semibold",children:"Total Pemasukan"}),e.jsx("span",{className:"text-2xl lg:text-4xl font-bold",children:b(c.total_pemasukan)})]})}),e.jsx("div",{className:"col-span-2 lg:col-span-1",children:e.jsxs(f,{className:"flex flex-col gap-2 pb-6 text-warning border border-2 border-warning",children:[e.jsx("span",{className:"text-md lg:text-xl font-semibold",children:"Total Anggaran"}),e.jsx("span",{className:"text-2xl lg:text-4xl font-bold",children:b(c.total_anggaran)})]})}),e.jsx("div",{className:"col-span-2 lg:col-span-1",children:e.jsxs(f,{className:"flex flex-col gap-2 pb-6 text-danger border border-2 border-danger",children:[e.jsx("span",{className:"text-md lg:text-xl font-semibold",children:"Total Pengeluaran"}),e.jsx("span",{className:"text-2xl lg:text-4xl font-bold",children:b(c.total_pengeluaran)})]})}),e.jsx("div",{className:"col-span-2 lg:col-span-1",children:e.jsxs(f,{className:"flex flex-col gap-2 pb-6 text-success border border-2 border-success",children:[e.jsx("span",{className:"text-md lg:text-xl font-semibold",children:"Dana Tersedia"}),e.jsx("span",{className:"text-2xl lg:text-4xl font-bold",children:b(c.dana_tersedia)})]})})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{onClick:A}),e.jsx($,{id:"report",href:route("transaksi.pengeluaran.view",d),target:"_blank",rel:"noopener noreferrer",className:"rounded-lg bg-transparent text-primary border border-primary group hover:bg-primary hover:text-white w-[37px] h-[37px] flex justify-center items-center",children:e.jsx("i",{className:"bi bi-file-text"})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs(T,{prefix:e.jsx(C,{icon:"wallet2"}),size:"sm",name:"rekening_id",value:d.rekening_id,onChange:m,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Rekening"}),p.map(a=>e.jsx("option",{value:a.id,children:a.nama_rekening},a.id))]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(T,{prefix:e.jsx(C,{icon:"tag"}),size:"sm",name:"kategori_id",value:d.kategori_id,onChange:m,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),g.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(T,{prefix:e.jsx(C,{icon:"calendar-month"}),size:"sm",name:"bulan",value:d.bulan?d.bulan:se(),onChange:m,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Bulan"}),le().map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(T,{prefix:e.jsx(C,{icon:"calendar-check"}),size:"sm",name:"tahun",value:d.tahun?d.tahun:oe(),onChange:m,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Tahun"}),ie().map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx(X,{onHandleFilter:m})]})]}),e.jsxs(L,{children:[e.jsxs(r,{children:[e.jsx(r.Thead,{children:e.jsxs(r.TrHead,{children:[e.jsx(r.Th,{width:"4",ordered:!0,onHandleOrder:x,column:"id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"no"}),e.jsx(r.Th,{width:"12",children:"Pengguna Dana"}),e.jsx(r.Th,{width:"15",ordered:!0,onHandleOrder:x,column:"kategori_id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"Kategori"}),e.jsx(r.Th,{width:"12",ordered:!0,onHandleOrder:x,column:"perencanaan_id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"Sub Kategori"}),e.jsx(r.Th,{width:"15",children:"Judul"}),e.jsx(r.Th,{width:"10",ordered:!0,onHandleOrder:x,column:"nominal",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"nominal"}),e.jsx(r.Th,{width:"13",ordered:!0,onHandleOrder:x,column:"tanggal",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"tanggal"}),e.jsx(r.Th,{width:"7",ordered:!0,onHandleOrder:x,column:"jenis",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"jenis"}),e.jsx(r.Th,{align:"end",width:"9",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(r.Tbody,{children:W()})]}),e.jsx(L.Footer,{data:i,params:n,setParams:s,setFetching:E,onChange:m})]})]}),e.jsx(ce,{title:o,showModal:F,closeModal:U,mode:P,data:j,pengeluaranData:t,categories:g,users:v,rekenings:p,perencanaans:D,handleChange:M,handleCheckboxChange:B,errors:k,submit:y,update:S,processing:_}),e.jsx(me,{title:o,showModal:I,closeModal:N,data:z})]})};export{Re as default};
