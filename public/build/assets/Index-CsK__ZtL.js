import{W as Z,r as c,j as e,Y as ee}from"./app-C4Jv1t57.js";import{B as ae}from"./Breadcrumbs--yruqYPc.js";import{C as se,a as ne,F as re,D as K,T as s,b as le}from"./GlobalHooks-0df3zo_G.js";import{F as N}from"./FormSelectPrefix-BfyP9Ahj.js";import{I as w}from"./Icon-CthqwkUx.js";import{L as Q}from"./Label-BBnGjdrh.js";import{N as oe}from"./NameWithAvatar-nQvf037O.js";import{A as T}from"./ActionButton-Ck6lOYFx.js";import{B as q}from"./react-toastify.esm-D3zJhEaB.js";import{U as te}from"./UsePageController-BjI68hbV.js";import{u as ie,b as de,c as ce}from"./UtangPiutangServices-yffFiOSy.js";import{A as me}from"./AppContentLayout-DigQTjPv.js";import{C as g}from"./ContentWrapper-DbsAeY5u.js";import{f as S,g as he,l as ue,a as xe,b as pe,c as je,h as ge}from"./GlobalFunction-v00fOhfa.js";import fe from"./UtangCreate-BWxI_ceD.js";import be from"./UtangDetail-0WYLM1B8.js";import ve from"./UtangBayar-DhB1fVd3.js";import"./Button-UVkl5p3s.js";import"./clsx-B-dksMZM.js";import"./FormInput-yH3HbQWX.js";import"./RegularSubmitModal-D_7kj2GN.js";/* empty css                      */import"./transition-D4x5verj.js";import"./FormTextarea-kSlhoP-H.js";import"./Modal-MQOUj3kL.js";import"./dialog-CtmRQ2xi.js";const De=(x,_)=>{const{data:t,setData:o,reset:m}=Z({user_id:"",judul:"",jenis:"transfer",nominal:"",jatuh_tempo:"",deskripsi:""}),[f,r]=c.useState({}),[b,h]=c.useState(null),u=()=>{r({})},{mode:v,params:p,setParams:D,fetching:j,request:i,showModal:k,handleShowModal:E,handleEditModal:y,handleCloseModal:B,initialData:l,setInitialData:d,setFetching:F,onHandleFilter:U,onHandleOrder:L}=te(x,u,m,"utang-piutang.utang.index");c.useEffect(()=>{j&&i(p)},[p,j]),c.useEffect(()=>{l.id&&o({id:l.id,user_id:l.user_id,judul:l.judul,jenis:l.jenis,jatuh_tempo:l.jatuh_tempo,nominal:l.nominal,deskripsi:l.deskripsi})},[l]);const P=n=>{o(n.target.name,n.target.type==="file"?n.target.files[0]:n.target.value)},H=n=>{n.target.checked?o(n.target.name,1):o(n.target.name,0)},A=n=>{n.preventDefault(),h(q.loading("Sedang menyimpan data...")),ie(t,r,u)},z=n=>{n.preventDefault(),h(q.loading("Sedang menyimpan data...")),de(t,r,u)},[J,I]=c.useState({}),[W,C]=c.useState(!1),R=n=>{C(!0),I(n)},Y=()=>{C(!1),d({}),m()},[O,a]=c.useState({}),[M,$]=c.useState(!1),V=n=>{$(!0),o(n)},G=()=>{$(!1),d({}),m()},X=n=>{n.preventDefault(),h(q.loading("Sedang menyimpan data...")),ce(t,r,u)};return se(_,f,b,h,M?G:B),{data:t,processing:b,errors:f,submit:A,update:z,handleChange:P,handleCheckboxChange:H,mode:v,params:p,setParams:D,setFetching:F,onHandleFilter:U,onHandleOrder:L,showModal:k,handleShowModal:E,handleEditModal:y,handleCloseModal:B,detailData:J,showDetailModal:W,handleShowDetailModal:R,handleCloseDetailModal:Y,bayarData:O,showBayarModal:M,handleShowBayarModal:V,handleCloseBayarModal:G,submitBayar:X}},Ge=({title:x,breadcrumbs:_,datas:t,widget:o,users:m,rekenings:f,filtered:r,flash:b})=>{const{data:h,processing:u,errors:v,submit:p,update:D,handleChange:j,params:i,setParams:k,setFetching:E,mode:y,showModal:B,onHandleFilter:l,onHandleOrder:d,handleShowModal:F,handleEditModal:U,handleCloseModal:L,detailData:P,showDetailModal:H,handleShowDetailModal:A,handleCloseDetailModal:z,bayarData:J,showBayarModal:I,handleShowBayarModal:W,handleCloseBayarModal:C,submitBayar:R}=De(r,b),Y=[{value:0,label:"Belum Lunas"},{value:1,label:"Lunas"}],O=()=>t.data.length>0?t.data.map((a,M)=>e.jsxs(s.TrBody,{children:[e.jsx(s.Td,{children:M+1}),e.jsx(s.Td,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(oe,{avatar:a.user.foto?`/images/${a.user.foto}`:a.user.foto,name:a.user.name})})}),e.jsx(s.Td,{children:a.judul}),e.jsx(s.Td,{children:S(a.nominal)}),e.jsx(s.Td,{children:je(a.jatuh_tempo)}),e.jsx(s.Td,{children:e.jsx(Q,{variant:a.jenis=="cash"?"info":"success",children:a.jenis})}),e.jsx(s.Td,{children:e.jsx(Q,{variant:a.status==0?"danger":"success",children:a.status==0?"Belum Lunas":"Lunas"})}),e.jsxs(s.Td,{className:"text-end pe-3",children:[e.jsx(T,{variant:"warning",icon:"search",label:"Detail",onClick:()=>A(a)}),e.jsx(T,{variant:"success",icon:"check-lg",label:"Bayar",onClick:()=>W(a),disabled:a.status==1}),e.jsx(T,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>U(a)}),e.jsx(T,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>ge("utang-piutang.utang.destroy",a.id,"Data berhasil dihapus")})]})]},a.id)):e.jsx(le,{colSpan:8});return e.jsxs(me,{children:[e.jsx(ee,{title:x}),e.jsx(ae,{title:x,breadcrumbs:_}),e.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-5",children:[e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-danger border border-2 border-danger",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Total Utang"}),e.jsx("span",{className:"text-4xl font-bold",children:S(o.total_utang)})]})}),e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-success border border-2 border-success",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Sudah Dibayar"}),e.jsx("span",{className:"text-4xl font-bold",children:S(o.total_dibayar)})]})}),e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-danger border border-2 border-danger",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Belum Dibayar"}),e.jsx("span",{className:"text-4xl font-bold",children:S(o.total_belum_dibayar)})]})}),e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-info border border-2 border-info",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Persentase Lunas"}),e.jsxs("span",{className:"text-4xl font-bold",children:[o.persentase,"%"]})]})})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ne,{onClick:F})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("div",{children:e.jsxs(N,{prefix:e.jsx(w,{icon:"person"}),size:"sm",name:"user_id",value:i.user_id,onChange:l,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Peminjam"}),m.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx("div",{children:e.jsxs(N,{prefix:e.jsx(w,{icon:"check-circle"}),size:"sm",name:"status",value:i.status,onChange:l,className:"w-[150px]",children:[e.jsx("option",{value:"",children:"Semua Status"}),Y.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(N,{prefix:e.jsx(w,{icon:"calendar-month"}),size:"sm",name:"bulan",value:i.bulan?i.bulan:he(),onChange:l,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Bulan"}),ue().map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(N,{prefix:e.jsx(w,{icon:"calendar-check"}),size:"sm",name:"tahun",value:i.tahun?i.tahun:xe(),onChange:l,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Tahun"}),pe().map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx(re,{onHandleFilter:l})]})]}),e.jsxs(K,{children:[e.jsxs(s,{children:[e.jsx(s.Thead,{children:e.jsxs(s.TrHead,{children:[e.jsx(s.Th,{width:"4",ordered:!0,onHandleOrder:d,column:"id",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"no"}),e.jsx(s.Th,{width:"15",children:"Peminjam"}),e.jsx(s.Th,{width:"15",children:"Judul"}),e.jsx(s.Th,{width:"10",ordered:!0,onHandleOrder:d,column:"nominal",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"nominal"}),e.jsx(s.Th,{width:"10",ordered:!0,onHandleOrder:d,column:"jatuh_tempo",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"jatuh tempo"}),e.jsx(s.Th,{width:"7",ordered:!0,onHandleOrder:d,column:"jenis",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"jenis"}),e.jsx(s.Th,{width:"7",ordered:!0,onHandleOrder:d,column:"status",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"status"}),e.jsx(s.Th,{align:"end",width:"10",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(s.Tbody,{children:O()})]}),e.jsx(K.Footer,{data:t,params:r,setParams:k,setFetching:E,onChange:l})]})]}),e.jsx(fe,{title:x,showModal:B,closeModal:L,mode:y,data:h,users:m,handleChange:j,errors:v,submit:p,update:D,processing:u}),e.jsx(ve,{showModal:I,closeModal:C,mode:y,data:h,users:m,rekenings:f,handleChange:j,errors:v,submit:R,update:D,processing:u}),e.jsx(be,{title:x,showModal:H,closeModal:z,data:P})]})};export{Ge as default};
