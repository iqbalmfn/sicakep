import{W as J,r as h,j as e,Y as $}from"./app-Dky1OL0q.js";import{B as G}from"./Breadcrumbs-BBA3x9fV.js";import{C as K,a as Q,F as V,D as W,T as s,A as b,b as X}from"./GlobalHooks-RbAbv1gA.js";import{F as v}from"./FormSelectPrefix-BtsEEQDD.js";import{I as D}from"./Icon-DqCGg3DT.js";import{L as R}from"./Label-CoOxO4J1.js";import{N as Z}from"./NameWithAvatar-BbVMXKZf.js";import{B as Y}from"./react-toastify.esm-D4KLAdp0.js";import{U as ee}from"./UsePageController-JGUW_bta.js";import{u as ae,b as se}from"./UtangPiutangServices-BnmXupGh.js";import{A as ne}from"./AppContentLayout-BXu8HdDp.js";import{C as g}from"./ContentWrapper-Ycte89Bk.js";import{f as C,b as re,l as le,a as te,c as oe,d as ie,k as de,h as ce}from"./GlobalFunction-BYU1XxCA.js";import he from"./UtangCreate-CQmACuHf.js";import me from"./UtangDetail-B5VuoMLN.js";import"./Button-H6c4ZnJ5.js";import"./clsx-B-dksMZM.js";import"./FormInput-BMU-lflI.js";import"./RegularSubmitModal-DMuzVBCr.js";/* empty css                      */import"./transition-DfSEsz85.js";import"./FormTextarea-C51USjr7.js";import"./Modal-BEsgWuvn.js";import"./dialog-C8x8T90B.js";const ue=(c,N)=>{const{data:d,setData:t,reset:m}=J({user_id:"",judul:"",jenis:"transfer",nominal:"",jatuh_tempo:"",deskripsi:""}),[n,u]=h.useState({}),[f,x]=h.useState(null),p=()=>{u({})},{mode:T,params:j,setParams:y,fetching:o,request:w,showModal:B,handleShowModal:M,handleEditModal:S,handleCloseModal:i,initialData:r,setInitialData:k,setFetching:_,onHandleFilter:E,onHandleOrder:F}=ee(c,p,m,"utang-piutang.utang.index");h.useEffect(()=>{o&&w(j)},[j,o]),h.useEffect(()=>{r.id&&t({id:r.id,user_id:r.user_id,judul:r.judul,jenis:r.jenis,jatuh_tempo:r.jatuh_tempo,nominal:r.nominal,deskripsi:r.deskripsi})},[r]);const L=l=>{t(l.target.name,l.target.type==="file"?l.target.files[0]:l.target.value)},U=l=>{l.target.checked?t(l.target.name,1):t(l.target.name,0)},P=l=>{l.preventDefault(),x(Y.loading("Sedang menyimpan data...")),ae(d,u,p)},H=l=>{l.preventDefault(),x(Y.loading("Sedang menyimpan data...")),se(d,u,p)},[A,a]=h.useState({}),[z,I]=h.useState(!1),O=l=>{I(!0),a(l)},q=l=>{I(!1),k({}),m()};return K(N,n,f,x,i),{data:d,processing:f,errors:n,submit:P,update:H,handleChange:L,handleCheckboxChange:U,mode:T,params:j,setParams:y,setFetching:_,onHandleFilter:E,onHandleOrder:F,showModal:B,handleShowModal:M,handleEditModal:S,handleCloseModal:i,detailData:A,showDetailModal:z,handleShowDetailModal:O,handleCloseDetailModal:q}},Ae=({title:c,breadcrumbs:N,datas:d,widget:t,users:m,filtered:n,flash:u})=>{const{data:f,processing:x,errors:p,submit:T,update:j,handleChange:y,params:o,setParams:w,setFetching:B,mode:M,showModal:S,onHandleFilter:i,onHandleOrder:r,handleShowModal:k,handleEditModal:_,handleCloseModal:E,detailData:F,showDetailModal:L,handleShowDetailModal:U,handleCloseDetailModal:P}=ue(n,u),H=[{value:0,label:"Belum Lunas"},{value:1,label:"Lunas"}],A=()=>d.data.length>0?d.data.map((a,z)=>e.jsxs(s.TrBody,{children:[e.jsx(s.Td,{children:z+1}),e.jsx(s.Td,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Z,{avatar:a.user.foto?`/images/${a.user.foto}`:a.user.foto,name:a.user.name})})}),e.jsx(s.Td,{children:a.judul}),e.jsx(s.Td,{children:C(a.nominal)}),e.jsx(s.Td,{children:ie(a.jatuh_tempo)}),e.jsx(s.Td,{children:e.jsx(R,{variant:a.jenis=="cash"?"info":"success",children:a.jenis})}),e.jsx(s.Td,{children:e.jsx(R,{variant:a.status==0?"danger":"success",children:a.status==0?"Belum Lunas":"Lunas"})}),e.jsxs(s.Td,{className:"text-end pe-3",children:[e.jsx(b,{variant:"warning",icon:"search",label:"Detail",onClick:()=>U(a)}),e.jsx(b,{variant:"success",icon:"check-lg",label:"Lunas",onClick:()=>de("utang-piutang.utang.bayar",a.id,"Utang telah dibayar")}),e.jsx(b,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>_(a)}),e.jsx(b,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>ce("utang-piutang.utang.destroy",a.id,"Data berhasil dihapus")})]})]},a.id)):e.jsx(X,{colSpan:8});return e.jsxs(ne,{children:[e.jsx($,{title:c}),e.jsx(G,{title:c,breadcrumbs:N}),e.jsxs("div",{className:"grid grid-cols-4 gap-5 mb-5",children:[e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-danger border border-2 border-danger",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Total Utang"}),e.jsx("span",{className:"text-4xl font-bold",children:C(t.total_utang)})]})}),e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-success border border-2 border-success",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Sudah Dibayar"}),e.jsx("span",{className:"text-4xl font-bold",children:C(t.total_dibayar)})]})}),e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-danger border border-2 border-danger",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Belum Dibayar"}),e.jsx("span",{className:"text-4xl font-bold",children:C(t.total_belum_dibayar)})]})}),e.jsx("div",{className:"col-span-4 lg:col-span-1",children:e.jsxs(g,{className:"flex flex-col gap-2 pb-6 text-info border border-2 border-info",children:[e.jsx("span",{className:"text-xl font-semibold",children:"Persentase Lunas"}),e.jsxs("span",{className:"text-4xl font-bold",children:[t.persentase,"%"]})]})})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Q,{onClick:k})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("div",{children:e.jsxs(v,{prefix:e.jsx(D,{icon:"person"}),size:"sm",name:"user_id",value:o.user_id,onChange:i,className:"w-[205px]",children:[e.jsx("option",{value:"",children:"Semua Peminjam"}),m.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx("div",{children:e.jsxs(v,{prefix:e.jsx(D,{icon:"check-circle"}),size:"sm",name:"status",value:o.status,onChange:i,className:"w-[150px]",children:[e.jsx("option",{value:"",children:"Semua Status"}),H.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(v,{prefix:e.jsx(D,{icon:"calendar-month"}),size:"sm",name:"bulan",value:o.bulan?o.bulan:re(),onChange:i,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Bulan"}),le().map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})}),e.jsx("div",{children:e.jsxs(v,{prefix:e.jsx(D,{icon:"calendar-check"}),size:"sm",name:"tahun",value:o.tahun?o.tahun:te(),onChange:i,className:"w-[150px]",children:[e.jsx("option",{value:"all",children:"Semua Tahun"}),oe().map(a=>e.jsx("option",{value:a,children:a},a))]})}),e.jsx(V,{onHandleFilter:i})]})]}),e.jsxs(W,{children:[e.jsxs(s,{children:[e.jsx(s.Thead,{children:e.jsxs(s.TrHead,{children:[e.jsx(s.Th,{width:"4",ordered:!0,onHandleOrder:r,column:"id",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"no"}),e.jsx(s.Th,{width:"15",children:"Peminjam"}),e.jsx(s.Th,{width:"15",children:"Judul"}),e.jsx(s.Th,{width:"10",ordered:!0,onHandleOrder:r,column:"nominal",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"nominal"}),e.jsx(s.Th,{width:"10",ordered:!0,onHandleOrder:r,column:"jatuh_tempo",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"jatuh tempo"}),e.jsx(s.Th,{width:"7",ordered:!0,onHandleOrder:r,column:"jenis",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"jenis"}),e.jsx(s.Th,{width:"7",ordered:!0,onHandleOrder:r,column:"status",orderBy:n.orderBy,orderDirection:n.orderDirection,children:"status"}),e.jsx(s.Th,{align:"end",width:"10",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(s.Tbody,{children:A()})]}),e.jsx(W.Footer,{data:d,params:n,setParams:w,setFetching:B,onChange:i})]})]}),e.jsx(he,{title:c,showModal:S,closeModal:E,mode:M,data:f,users:m,handleChange:y,errors:p,submit:T,update:j,processing:x}),e.jsx(me,{title:c,showModal:L,closeModal:P,data:F})]})};export{Ae as default};
