import{j as i}from"./app-C4Jv1t57.js";import{F as l,a as s,b as p,c as m,R as D}from"./RegularSubmitModal-D_7kj2GN.js";import{F as o}from"./FormInput-yH3HbQWX.js";import{F as R}from"./FormTextarea-kSlhoP-H.js";import{F as C}from"./FormToggle-BJI33N5C.js";import{M as j}from"./Modal-MQOUj3kL.js";import{f as _}from"./GlobalFunction-v00fOhfa.js";import{c as M}from"./clsx-B-dksMZM.js";import"./Button-UVkl5p3s.js";import"./Icon-CthqwkUx.js";import"./dialog-CtmRQ2xi.js";import"./transition-D4x5verj.js";import"./react-toastify.esm-D3zJhEaB.js";const $=({title:k,submit:f,update:v,showModal:b,closeModal:g,mode:t,data:e,categories:F,users:q,rekenings:N,perencanaans:E,pengeluaranData:S,handleChange:d,handleCheckboxChange:T,errors:n,processing:z})=>{const I=["online","cash"];let h=[];h=E.filter(a=>a.kategori_id==e.kategori_id);let u={};u=h.find(a=>a.id==e.perencanaan_id);let c=0;c=S.filter(a=>a.perencanaan_id==e.perencanaan_id).reduce((a,P)=>parseInt(a)+parseInt(P.nominal),0),t=="edit"&&(c=c-e.nominal_strict);let x=0;return e.nominal?x=parseInt(c)+parseInt(e.nominal):x=parseInt(c),i.jsxs(j,{maxWidth:"3xl",show:b,onClose:g,closeable:!1,children:[i.jsxs(j.Header,{onClick:g,children:[t==="create"?"Tambah":"Update"," ",k]}),i.jsxs("form",{onSubmit:t==="create"?f:v,children:[i.jsx(j.Body,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-5 py-5",children:[e.perencanaan_id?i.jsxs("div",{className:"col-span-2 flex flex-col border rounded-lg border-info px-3 py-2 text-info bg-blue-50",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Alokasi Anggaran"}),i.jsx("span",{children:":"}),i.jsx("span",{children:_(u==null?void 0:u.nominal)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold",children:"Anggaran Terpakai"}),i.jsx("span",{children:":"}),i.jsx("span",{className:M(parseInt(u==null?void 0:u.nominal)<x?"text-danger":""),children:_(e.nominal?x:parseInt(c))})]})]}):null,i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[i.jsxs(l,{children:[i.jsx(s,{name:"Kategori",htmlFor:"kategori_id",required:!0}),i.jsxs(p,{size:"sm",id:"kategori_id",name:"kategori_id",onChange:d,value:e.kategori_id,isError:n==null?void 0:n.kategori_id,required:!0,children:[i.jsx("option",{value:"",children:"Pilih Kategori"}),F.map(a=>i.jsx("option",{value:a.value,children:a.label},a.value))]}),i.jsx(m,{message:n==null?void 0:n.kategori_id})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Sumber Anggaran",htmlFor:"perencanaan_id",required:!0}),i.jsxs(p,{size:"sm",id:"perencanaan_id",name:"perencanaan_id",onChange:d,value:e.perencanaan_id,isError:n==null?void 0:n.perencanaan_id,required:!0,disabled:!e.kategori_id,children:[i.jsx("option",{value:"",children:"Pilih Sumber Anggaran"}),h.map(a=>i.jsx("option",{value:a.id,children:a.judul},a.id))]}),i.jsx(m,{message:n==null?void 0:n.perencanaan_id})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Pengguna Dana",htmlFor:"user_id",required:!0}),i.jsxs(p,{size:"sm",id:"user_id",name:"user_id",onChange:d,value:e.user_id,isError:n==null?void 0:n.user_id,required:!0,disabled:!e.perencanaan_id,children:[i.jsx("option",{value:"",children:"Pilih Pengguna Dana"}),q.map(a=>i.jsx("option",{value:a.id,children:a.name},a.id))]}),i.jsx(m,{message:n==null?void 0:n.user_id})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Rekening Yang Digunakanan",htmlFor:"rekening_id",required:!0}),i.jsxs(p,{size:"sm",id:"rekening_id",name:"rekening_id",onChange:d,value:e.rekening_id,isError:n==null?void 0:n.rekening_id,required:!0,disabled:!e.perencanaan_id,children:[i.jsx("option",{value:"",children:"Pilih Rekening Yang Digunakanan"}),N.map(a=>i.jsxs("option",{value:a.id,children:[a.nama_rekening," ",a.no_rekening?`(${a.no_rekening})`:null]},a.id))]}),i.jsx(m,{message:n==null?void 0:n.rekening_id})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Judul",htmlFor:"judul",required:!0}),i.jsx(o,{size:"sm",id:"judul",name:"judul",onChange:d,defaultValue:e.judul,placeholder:"Masukkan Judul",isError:n==null?void 0:n.judul,required:!0,disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.judul})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Nominal",htmlFor:"nominal",required:!0}),i.jsx(o,{type:"number",size:"sm",id:"nominal",name:"nominal",onChange:d,defaultValue:e.nominal,placeholder:"Masukkan Nominal",isError:n==null?void 0:n.nominal,required:!0,disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.nominal})]})]}),i.jsxs("div",{className:"col-span-1 flex flex-col gap-4",children:[i.jsxs(l,{children:[i.jsx(s,{name:"Jenis",htmlFor:"jenis",required:!0}),i.jsx(p,{size:"sm",id:"jenis",name:"jenis",onChange:d,value:e.jenis,isError:n==null?void 0:n.jenis,required:!0,disabled:!e.perencanaan_id,children:I.map(a=>i.jsx("option",{value:a,children:a},a))}),i.jsx(m,{message:n==null?void 0:n.jenis})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Tanggal",htmlFor:"tanggal",required:!0}),i.jsx(o,{type:"date",size:"sm",id:"tanggal",name:"tanggal",onChange:d,defaultValue:e.tanggal,placeholder:"Masukkan Tanggal",isError:n==null?void 0:n.tanggal,required:!0,disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.tanggal})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Sesuai Anggaran",htmlFor:"is_sesuai",required:!0}),i.jsxs("div",{className:"flex items-center gap-3 mt-1 mb-2",children:[i.jsx("span",{children:"Tidak Sesuai"}),i.jsx(C,{variant:"success",name:"is_sesuai",onChange:T,checked:e.is_sesuai=="1"}),i.jsx("span",{children:"Sesuai"})]})]}),i.jsxs(l,{children:[i.jsx(s,{name:"Deskripsi",htmlFor:"deskripsi"}),i.jsx(R,{size:"sm",id:"deskripsi",name:"deskripsi",onChange:d,defaultValue:e.deskripsi,placeholder:"Tulis Deskripsi...",isError:n==null?void 0:n.deskripsi,rows:"3",disabled:!e.perencanaan_id}),i.jsx(m,{message:n==null?void 0:n.deskripsi})]})]})]})}),i.jsx(j.Footer,{children:i.jsx(D,{closeModal:g,label:t==="create"?"Simpan":"Update",disabled:z||!e.user_id||!e.kategori_id||!e.judul||!e.nominal||!e.jenis||!e.tanggal})})]})]})};export{$ as default};
