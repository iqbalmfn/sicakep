import{y as R,W as H,r as j,j as e,Y as P}from"./app-EoTJaFRv.js";import{B as A}from"./Breadcrumbs-BW5JIRXN.js";import{C as U,a as W,F as L,D as N,T as O}from"./GlobalHooks-Dfsq8FuZ.js";import{L as $}from"./Label-KTQIPI35.js";import{A as B}from"./ActionButton-ChpBwUDD.js";import{U as q,T as n}from"./UsePageController-BRH0xjj8.js";import{A as I}from"./AppContentLayout-kEhVftYj.js";import{C as Y}from"./ContentWrapper-QrOM59W1.js";import{f as z,h as G}from"./GlobalFunction-CxqASHSB.js";import{B as M}from"./react-toastify.esm-DCatb0rQ.js";import J from"./RekeningCreate-D4OvzjEx.js";import{N as K}from"./NameWithAvatar-Bs2EPafO.js";import"./Icon-VJnjoiri.js";import"./clsx-B-dksMZM.js";import"./Button-BaHsF5CK.js";import"./FormInput-c46xzV1k.js";import"./RegularSubmitModal-DYXzlMdB.js";/* empty css                      */import"./transition-I11AEsoZ.js";import"./Modal-th-n78aA.js";import"./dialog-FXrdkN3w.js";const Q=(o,d,a)=>{R.post(route("aset.rekening.store"),o,{onError:i=>{d(i)},onSuccess:()=>{a()},preserveScroll:!1,preserveState:!0})},V=(o,d,a)=>{R.post(route("aset.rekening.update",{rekening:o.id}),{...o,_method:"PUT"},{onError:i=>{d(i)},onSuccess:()=>{a()},preserveScroll:!1,preserveState:!0})},X=(o,d)=>{const{data:a,setData:i,reset:u}=H({user_id:"",bank_id:"",nama_rekening:"",no_rekening:"",saldo:""}),[l,c]=j.useState({}),[x,h]=j.useState(null),m=()=>{c({})},{mode:k,params:p,setParams:f,fetching:T,request:b,showModal:C,handleShowModal:_,handleEditModal:w,handleCloseModal:g,initialData:t,setFetching:v,onHandleFilter:y,onHandleOrder:D}=q(o,m,u,"aset.rekening.index");j.useEffect(()=>{T&&b(p)},[p,T]),j.useEffect(()=>{t.id&&i({id:t.id,user_id:t.user_id,bank_id:t.bank_id,nama_rekening:t.nama_rekening,no_rekening:t.no_rekening,saldo:t.saldo})},[t]);const S=s=>{i(s.target.name,s.target.type==="file"?s.target.files[0]:s.target.value)},r=s=>{s.target.checked?i(s.target.name,1):i(s.target.name,0)},E=s=>{s.preventDefault(),h(M.loading("Sedang menyimpan data...")),Q(a,c,m)},F=s=>{s.preventDefault(),h(M.loading("Sedang menyimpan data...")),V(a,c,m)};return U(d,l,x,h,g),{data:a,processing:x,errors:l,submit:E,update:F,handleChange:S,handleCheckboxChange:r,mode:k,params:p,setParams:f,setFetching:v,onHandleFilter:y,onHandleOrder:D,showModal:C,handleShowModal:_,handleEditModal:w,handleCloseModal:g}},Te=({title:o,breadcrumbs:d,datas:a,banks:i,users:u,filtered:l,flash:c})=>{const{data:x,processing:h,errors:m,submit:k,update:p,handleChange:f,handleCheckboxChange:T,setParams:b,setFetching:C,mode:_,showModal:w,onHandleFilter:g,onHandleOrder:t,handleShowModal:v,handleEditModal:y,handleCloseModal:D}=X(l,c),S=()=>a.data.length>0?a.data.map((r,E)=>e.jsxs(n.TrBody,{children:[e.jsx(n.Td,{children:E+1}),e.jsx(n.Td,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{avatar:r.user.foto?`/images/${r.user.foto}`:r.user.foto,name:r.user.name})})}),e.jsx(n.Td,{children:r.nama_rekening}),e.jsx(n.Td,{children:r.no_rekening}),e.jsx(n.Td,{children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:`/storage/bank/${r.bank.logo}`,alt:"logo",className:"w-[50px]"})})}),e.jsx(n.Td,{children:e.jsx($,{variant:r.bank.jenis=="bank"?"info":r.bank.jenis=="e-wallet"?"success":"warning",children:r.bank.jenis})}),e.jsx(n.Td,{className:"font-bold",children:z(r.saldo)}),e.jsxs(n.Td,{className:"text-end pe-3",children:[e.jsx(B,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>y(r)}),e.jsx(B,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>G("master.kategori.destroy",r.id,"Data berhasil dihapus"),disabled:r.transaksi_aset_initial.length>0||r.transaksi_aset_destination.length>0||r.transaksi.length==0})]})]},r.id)):e.jsx(O,{colSpan:7});return e.jsxs(I,{children:[e.jsx(P,{title:o}),e.jsx(A,{title:o,breadcrumbs:d}),e.jsxs(Y,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(W,{onClick:v})}),e.jsx(L,{onHandleFilter:g})]}),e.jsxs(N,{children:[e.jsxs(n,{children:[e.jsx(n.Thead,{children:e.jsxs(n.TrHead,{children:[e.jsx(n.Th,{width:"3",ordered:!0,onHandleOrder:t,column:"id",orderBy:l.orderBy,orderDirection:l.orderDirection,children:"no"}),e.jsx(n.Th,{width:"15",children:"Pemilik Rekening"}),e.jsx(n.Th,{width:"15",children:"Nama Rekening"}),e.jsx(n.Th,{width:"10",children:"Nomor Rekening"}),e.jsx(n.Th,{width:"10",children:"Nama Bank/E-Wallet"}),e.jsx(n.Th,{width:"5",children:"jenis"}),e.jsx(n.Th,{width:"10",ordered:!0,onHandleOrder:t,column:"saldo",orderBy:l.orderBy,orderDirection:l.orderDirection,children:"saldo"}),e.jsx(n.Th,{align:"end",width:"7",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(n.Tbody,{children:S()})]}),e.jsx(N.Footer,{data:a,params:l,setParams:b,setFetching:C,onChange:g})]})]}),e.jsx(J,{title:o,showModal:w,closeModal:D,mode:_,data:x,users:u,banks:i,handleChange:f,errors:m,submit:k,update:p,processing:h})]})};export{Te as default};
