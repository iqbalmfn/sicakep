import{y as F,W as U,r as b,j as e,Y as A}from"./app-UVFO0ZgA.js";import{B as L}from"./Breadcrumbs-Cpuw1mof.js";import{C as O,a as R,F as W,D as B,T as q}from"./GlobalHooks-CRJfo_kG.js";import{L as I}from"./Label-5h4Oivxf.js";import{A as E}from"./ActionButton-C8zkDC9Q.js";import{U as Y,T as a}from"./UsePageController-D4e6JcyB.js";import{B as M}from"./react-toastify.esm-BG4VbzAR.js";import{A as _}from"./AppContentLayout-uprGBnmC.js";import{C as $}from"./ContentWrapper-BG-1JI41.js";import{h as z}from"./GlobalFunction-ClZYWXXL.js";import G from"./BankCreate-srhtdGwu.js";import"./Icon-CIUb5iLn.js";import"./clsx-B-dksMZM.js";import"./Button-F8vdd4UU.js";import"./FormInput-CBwyJR2b.js";import"./RegularSubmitModal-C1sT-BSU.js";/* empty css                      */import"./transition-Dt1y6Vjt.js";import"./Modal-Cr2HN_1p.js";import"./dialog-B54NAuet.js";const J=(t,l,n)=>{F.post(route("master.bank.store"),t,{onError:r=>{l(r)},onSuccess:()=>{n()},preserveScroll:!1,preserveState:!0})},K=(t,l,n)=>{F.post(route("master.bank.update",{bank:t.id}),{...t,_method:"PUT"},{onError:r=>{l(r)},onSuccess:()=>{n()},preserveScroll:!1,preserveState:!0})},Q=(t,l)=>{const{data:n,setData:r,reset:C}=U({nama:"",jenis:"",logo:""}),[h,d]=b.useState({}),[p,c]=b.useState(null),m=()=>{d({})},{mode:T,params:x,setParams:k,fetching:j,request:y,showModal:v,handleShowModal:u,handleEditModal:g,handleCloseModal:f,initialData:i,setFetching:w,onHandleFilter:D,onHandleOrder:o}=Y(t,m,C,"master.bank.index");b.useEffect(()=>{j&&y(x)},[x,j]),b.useEffect(()=>{i.id&&r({id:i.id,nama:i.nama,jenis:i.jenis,previewLogo:i.logo})},[i]);const S=s=>{r(s.target.name,s.target.type==="file"?s.target.files[0]:s.target.value)},N=s=>{s.target.checked?r(s.target.name,1):r(s.target.name,0)},H=s=>{s.preventDefault(),c(M.loading("Sedang menyimpan data...")),J(n,d,m)},P=s=>{s.preventDefault(),c(M.loading("Sedang menyimpan data...")),K(n,d,m)};return O(l,h,p,c,f),{data:n,processing:p,errors:h,submit:H,update:P,handleChange:S,handleCheckboxChange:N,mode:T,params:x,setParams:k,setFetching:w,onHandleFilter:D,onHandleOrder:o,showModal:v,handleShowModal:u,handleEditModal:g,handleCloseModal:f}},ge=({title:t,breadcrumbs:l,datas:n,filtered:r,flash:C})=>{const{data:h,processing:d,errors:p,submit:c,update:m,handleChange:T,handleCheckboxChange:x,setParams:k,setFetching:j,mode:y,showModal:v,onHandleFilter:u,onHandleOrder:g,handleShowModal:f,handleEditModal:i,handleCloseModal:w}=Q(r,C),D=()=>n.data.length>0?n.data.map((o,S)=>e.jsxs(a.TrBody,{children:[e.jsx(a.Td,{children:S+1}),e.jsx(a.Td,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`/storage/bank/${o.logo}`,alt:"logo",className:"w-[50px]"}),e.jsx("span",{children:o.nama})]})}),e.jsx(a.Td,{children:e.jsx(I,{variant:o.jenis=="bank"?"info":o.jenis=="e-wallet"?"success":"warning",children:o.jenis})}),e.jsxs(a.Td,{className:"text-end pe-3",children:[e.jsx(E,{variant:"info",icon:"pencil",label:"Edit",onClick:()=>i(o)}),e.jsx(E,{variant:"danger",icon:"trash",label:"Hapus",onClick:()=>z("master.bank.destroy",o.id,"Data berhasil dihapus")})]})]},o.id)):e.jsx(q,{colSpan:5});return e.jsxs(_,{children:[e.jsx(A,{title:t}),e.jsx(L,{title:t,breadcrumbs:l}),e.jsxs($,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(R,{onClick:f})}),e.jsx(W,{onHandleFilter:u})]}),e.jsxs(B,{children:[e.jsxs(a,{children:[e.jsx(a.Thead,{children:e.jsxs(a.TrHead,{children:[e.jsx(a.Th,{width:"5",ordered:!0,onHandleOrder:g,column:"id",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"no"}),e.jsx(a.Th,{width:"69",children:"Nama"}),e.jsx(a.Th,{width:"10",ordered:!0,onHandleOrder:g,column:"jenis",orderBy:r.orderBy,orderDirection:r.orderDirection,children:"jenis"}),e.jsx(a.Th,{align:"end",width:"7",children:e.jsx("span",{className:"me-3",children:"opsi"})})]})}),e.jsx(a.Tbody,{children:D()})]}),e.jsx(B.Footer,{data:n,params:r,setParams:k,setFetching:j,onChange:u})]})]}),e.jsx(G,{title:t,showModal:v,closeModal:w,mode:y,data:h,handleChange:T,errors:p,submit:c,update:m,processing:d})]})};export{ge as default};
